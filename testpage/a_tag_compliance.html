<!DOCTYPE html>
<html>
<head>
    <title>a Element Compliance</title>
    <style>
        .pass { color: green; }
        .fail { color: red; }
        .test-result { font-family: monospace; margin: 5px 0; }
    </style>
</head>
<body>
    <h1>HTMLAnchorElement Interface Tests</h1>
    <div id="anchor-results"></div>

    <h2>Test Link</h2>
    <a href="https://user:pass@shop.example.com:8080/products/shoes?color=red#reviews" 
       id="test-anchor" 
       rel="noopener noreferrer sponsored">Click here to visit the shop</a>

    <script>
    (function() {
        var results = document.getElementById('anchor-results');
        var anchor = document.getElementById('test-anchor');
        var passed = 0;
        var failed = 0;

        function assert(condition, description) {
            var div = document.createElement('div');
            div.className = 'test-result ' + (condition ? 'pass' : 'fail');
            div.textContent = (condition ? '✓ ' : '✗ ') + description;
            results.appendChild(div);
            if (condition) passed++; else failed++;
        }

        // === .text property ===
        assert(anchor.text === 'Click here to visit the shop',
            '.text getter returns "Click here to visit the shop" (was: "' + anchor.text + '")');

        anchor.text = 'New link text';
        assert(anchor.text === 'New link text',
            '.text setter updates to "New link text" (was: "' + anchor.text + '")');
        anchor.text = 'Click here to visit the shop'; // restore

        // === .relList (DOMTokenList) ===
        assert(anchor.relList !== undefined,
            '.relList exists');
        
        assert(anchor.relList.length === 3,
            '.relList.length === 3 (was: ' + anchor.relList.length + ')');

        assert(anchor.relList.contains('noopener') === true,
            '.relList.contains("noopener") === true');

        assert(anchor.relList.contains('nofollow') === false,
            '.relList.contains("nofollow") === false');

        anchor.relList.add('nofollow');
        assert(anchor.relList.contains('nofollow') === true,
            '.relList.add("nofollow") works');

        anchor.relList.remove('nofollow');
        assert(anchor.relList.contains('nofollow') === false,
            '.relList.remove("nofollow") works');

        assert(anchor.relList.item(0) === 'noopener',
            '.relList.item(0) === "noopener" (was: "' + anchor.relList.item(0) + '")');

        // === HTMLHyperlinkElementUtils ===
        assert(anchor.protocol === 'https:',
            '.protocol === "https:" (was: "' + anchor.protocol + '")');

        assert(anchor.username === 'user',
            '.username === "user" (was: "' + anchor.username + '")');

        assert(anchor.password === 'pass',
            '.password === "pass" (was: "' + anchor.password + '")');

        assert(anchor.host === 'shop.example.com:8080',
            '.host === "shop.example.com:8080" (was: "' + anchor.host + '")');

        assert(anchor.hostname === 'shop.example.com',
            '.hostname === "shop.example.com" (was: "' + anchor.hostname + '")');

        assert(anchor.port === '8080',
            '.port === "8080" (was: "' + anchor.port + '")');

        assert(anchor.pathname === '/products/shoes',
            '.pathname === "/products/shoes" (was: "' + anchor.pathname + '")');

        assert(anchor.search === '?color=red',
            '.search === "?color=red" (was: "' + anchor.search + '")');

        assert(anchor.hash === '#reviews',
            '.hash === "#reviews" (was: "' + anchor.hash + '")');

        assert(anchor.origin === 'https://shop.example.com:8080',
            '.origin === "https://shop.example.com:8080" (was: "' + anchor.origin + '")');

        // Summary
        var summary = document.createElement('h3');
        summary.textContent = 'Results: ' + passed + ' passed, ' + failed + ' failed';
        summary.className = failed === 0 ? 'pass' : 'fail';
        results.insertBefore(summary, results.firstChild);
    })();
    </script>

    <hr>

    <h1>preventDefault() Tests</h1>

    <h2>Link with preventDefault (should NOT navigate)</h2>
    <a href="/should-not-navigate" id="prevented-link">Click me - navigation prevented</a>
    <p id="prevent-status">Status: not clicked</p>
    <script>
        document.getElementById('prevented-link').addEventListener('click', function(event) {
            event.preventDefault();
            document.getElementById('prevent-status').textContent = 'Status: clicked but navigation prevented!';
        });
    </script>

    <h2>Link without preventDefault (should navigate)</h2>
    <a href="/should-navigate" id="normal-link">Click me - normal navigation</a>
    <p id="normal-status">Status: not clicked</p>
    <script>
        document.getElementById('normal-link').addEventListener('click', function(event) {
            document.getElementById('normal-status').textContent = 'Status: clicked, navigating...';
            // No preventDefault - should navigate
        });
    </script>

    <h2>Inline onclick with return false (should NOT navigate)</h2>
    <a href="/should-not-navigate" onclick="document.getElementById('inline-status').textContent = 'Status: prevented via return false!'; return false;">Click me - inline prevention</a>
    <p id="inline-status">Status: not clicked</p>

    <h1>Placeholder &lt;a&gt; Tests (no href)</h1>

    <h2>Placeholder anchor (should render as plain text, not a link)</h2>
    <a>This is a placeholder - no href, no link styling, not clickable</a>

    <h2>Placeholder with other attributes (still not a link)</h2>
    <a id="placeholder-anchor" class="nav-item" hreflang="en" type="text/html">Attributes present but no href</a>

    <h2>Placeholder vs real link side by side</h2>
    <p><a href="/destination">This is a real link (blue, underlined)</a> vs <a>this is a placeholder (plain text)</a></p>

    <h2>Navigation menu with current page placeholder</h2>
    <p>
        <a href="/home">Home</a> |
        <a>About (current page)</a> |
        <a href="/contact">Contact</a>
    </p>

    <h1>Nested &lt;a&gt; Tests</h1>

    <h2>Nested a tags</h2>
    <a href="/page1">outer <a href="/page2">inner</a> text</a>

    <h2>Triple nested a</h2>
    <a href="/1"><a href="/2"><a href="/3">deep</a></a></a>

    <h2>a with text before nested a</h2>
    <a href="/main">Click here <a href="/other">or here</a> for more</a>

    <h1>Ping Attribute Tests</h1>

    <h2>Single ping URL</h2>
    <a href="/destination" ping="/tracker">Click to ping one URL</a>

    <h2>Multiple ping URLs</h2>
    <a href="/destination" ping="/tracker1 /tracker2 /tracker3">Click to ping multiple URLs</a>

    <h2>Ping with absolute URL</h2>
    <a href="/destination" ping="https://analytics.example.com/track">Click to ping absolute URL</a>

    <h2>Ping without href (should be ignored)</h2>
    <a ping="/tracker">No href - ping should not fire</a>

    <h1>Hreflang Attribute Tests</h1>

    <h2>Basic hreflang</h2>
    <a href="/about" hreflang="en">English page</a>

    <h2>Regional variant</h2>
    <a href="/sobre" hreflang="es-MX">Spanish (Mexico)</a>

    <h2>Hreflang without href (should be ignored)</h2>
    <a hreflang="fr">No href - hreflang ignored</a>

    <h1>Type Attribute Tests</h1>

    <h2>PDF type hint</h2>
    <a href="/doc.pdf" type="application/pdf">Download PDF</a>

    <h2>JSON type hint</h2>
    <a href="/data.json" type="application/json">View JSON</a>

    <h2>Type without href (should be ignored)</h2>
    <a type="text/html">No href - type ignored</a>

    <h1>ReferrerPolicy Attribute Tests</h1>

    <h2>no-referrer</h2>
    <a href="/page" referrerpolicy="no-referrer">No referrer sent</a>

    <h2>origin</h2>
    <a href="/page" referrerpolicy="origin">Only origin sent</a>

    <h2>same-origin</h2>
    <a href="/page" referrerpolicy="same-origin">Full URL same-site only</a>

    <h2>strict-origin-when-cross-origin</h2>
    <a href="/page" referrerpolicy="strict-origin-when-cross-origin">Modern default</a>

    <h2>unsafe-url</h2>
    <a href="/page" referrerpolicy="unsafe-url">Always full URL</a>

    <h2>ReferrerPolicy without href (should be ignored)</h2>
    <a referrerpolicy="no-referrer">No href - policy ignored</a>

</body>
</html>
